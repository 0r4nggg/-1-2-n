<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>押すたびに当たる確率が減っていくボタン</title>
  <link rel="stylesheet" href="style.css">
  <meta name="description" content="当たる確率が押すごとに(1/2)^nの確率ずつ減っていくボタンです。nは押した回数です。">
  <meta name="author" content="0r4nggg">
  <meta name="keywords" content="ボタン,(1/2)^n,確率,無限級数">
  <script>
    var n = 0;
    var decimalPlaces = 2;
    var threshold = 12;
    var maxDecimalPlaces = 64;

    function EVENT1() {
      n += 1;
      var probability = 0.5 ** n;
      var result = (Math.random() < probability) ? "当たり！" : "ハズレ";

      if (decimalPlaces < threshold) {
        decimalPlaces += 1;
      } else if (decimalPlaces >= maxDecimalPlaces) {
        decimalPlaces = 2; 
      } else {
        decimalPlaces += 1;
      }

      var probabilityPercent = (probability * 100).toFixed(decimalPlaces);
      if (decimalPlaces >= maxDecimalPlaces || parseFloat(probabilityPercent) === 0) {
        probabilityPercent = "0.00";
      }

      document.getElementById("result").innerText = result;
      document.getElementById("probability").innerText = "現在の確率: " + probabilityPercent + "%";
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>(1/2)^nボタン（nは押した回数！）</h1>
    <button type="button" onClick="EVENT1()">
      <img src="m-0917-3d-icon.png" width="130" height="100" alt="ボタン">
    </button>
    <p id="result"></p>
  </div>
  <div id="probability">現在の確率: 100.00%</div>
</body>
</html>
